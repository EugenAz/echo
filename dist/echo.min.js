/*! echo-js v1.7.3 | (c) 2015 @toddmotto | https://github.com/toddmotto/echo */
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){"use strict";var e,n,o,r,a,c,i={},u=function(){},d=function(t){return null===t.offsetParent},l=function(t,e){if(d(t))return!1;var n=t.getBoundingClientRect();return n.right>=e.l&&n.bottom>=e.t&&n.left<=e.r&&n.top<=e.b},f=function(){var e=t.innerWidth||document.documentElement.clientWidth;return c>e},h=function(){return window.devicePixelRatio>1},m=function(){return f()?"-mob":""},b=function(){return h()?"-retina":""},s=function(){(r||!n)&&(clearTimeout(n),n=setTimeout(function(){i.render(),n=null},o))};return i.init=function(n){n=n||{};var d=n.offset||0,l=n.offsetVertical||d,f=n.offsetHorizontal||d,h=function(t,e){return parseInt(t||e,10)};e={t:h(n.offsetTop,l),b:h(n.offsetBottom,l),l:h(n.offsetLeft,f),r:h(n.offsetRight,f)},o=h(n.throttle,250),r=n.debounce!==!1,c=n.mobileMQBreakpoint||768,a=!!n.unload,u=n.callback||u,i.render(),document.addEventListener?(t.addEventListener("scroll",s,!1),t.addEventListener("load",s,!1)):(t.attachEvent("onscroll",s),t.attachEvent("onload",s))},i.render=function(){for(var n,o,r=document.querySelectorAll("img[data-echo], [data-echo-retina], [data-echo-mob], [data-echo-mob-retina], [data-echo-background]"),c=r.length,d={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},f=0;c>f;f++)o=r[f],l(o,d)?(a&&o.setAttribute("data-echo-placeholder",o.src),null!==o.getAttribute("data-echo-background")?o.style.backgroundImage="url("+o.getAttribute("data-echo-background")+")":o.src=o.getAttribute("data-echo"+m()+b()),a||(o.removeAttribute("data-echo"),o.removeAttribute("data-echo-retina"),o.removeAttribute("data-echo-mob"),o.removeAttribute("data-echo-mob-retina"),o.removeAttribute("data-echo-background")),u(o,"load")):a&&(n=o.getAttribute("data-echo-placeholder"))&&(null!==o.getAttribute("data-echo-background")?o.style.backgroundImage="url("+n+")":o.src=n,o.removeAttribute("data-echo-placeholder"),u(o,"unload"));c||i.detach()},i.detach=function(){document.removeEventListener?t.removeEventListener("scroll",s):t.detachEvent("onscroll",s),clearTimeout(n)},i});